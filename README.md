# ADC 팀 배분 시스템

리그 오브 레전드 플레이어들의 티어와 챔피언 숙련도를 분석하여 공정한 팀 배분을 수행하는 프로그램입니다.

## 주요 기능

이 프로그램은 Riot Games API를 통해 플레이어 정보를 수집하고, 각 플레이어의 라인별 선호도와 실력을 종합적으로 평가하여 두 팀의 전력 균형을 최적화합니다. 헝가리안 알고리즘을 활용하여 각 플레이어에게 가장 적합한 포지션을 할당하고, 가능한 모든 팀 조합을 검토하여 가장 밸런스가 맞는 구성을 찾아냅니다.

## YAML 파일 구성

프로그램은 `env` 디렉토리 내의 여러 YAML 설정 파일을 사용합니다.

### key.yaml

Riot Games API 키를 저장하는 파일입니다.

```yaml
API_KEY: "여기에_API_키_입력"
```

Riot Games Developer Portal에서 발급받은 API 키를 입력해야 합니다.

### classification.yaml

리그 오브 레전드 챔피언 ID와 해당 챔피언이 플레이 가능한 포지션을 매핑한 파일입니다. 각 챔피언은 하나 이상의 포지션을 가질 수 있으며, 프로그램은 이 정보를 바탕으로 플레이어의 라인별 선호도를 계산합니다.

형식은 다음과 같습니다:

```yaml
1: ["MID", "SUP"]  # 챔피언 ID: [포지션 리스트]
```

### input_players.yaml

팀 배분에 참여할 플레이어 목록과 제약 조건을 정의하는 파일입니다.

```yaml
players:
  - ["닉네임", "태그", "수동티어(선택)"]
  - ["예시플레이어", "KR1", "D3"]

include_group: []  # 같은 팀에 배치되어야 하는 그룹
  # - [["플레이어1", "태그1"], ["플레이어2", "태그2"]]

expel_group: []    # 다른 팀에 배치되어야 하는 그룹
  # - [["플레이어3", "태그3"], ["플레이어4", "태그4"]]
```

`players` 리스트의 각 항목은 최소 2개 요소(닉네임, 태그)를 포함하며, 세 번째 요소로 수동 티어를 지정할 수 있습니다. 수동 티어가 제공되면 API에서 가져온 티어 정보를 덮어씁니다.

`include_group`은 반드시 같은 팀에 배치되어야 하는 플레이어 그룹을 정의합니다. 그룹 내 모든 플레이어가 한 팀에 몰리거나 모두 분산되어야 합니다.

`expel_group`은 반드시 다른 팀에 배치되어야 하는 플레이어 그룹을 정의합니다. 그룹 내 플레이어들이 한 팀에 모두 몰리거나 모두 같은 팀에 있으면 안 됩니다.

## 작동 원리

프로그램은 다음과 같은 단계로 팀 배분을 수행합니다.

1. **데이터 수집**: 각 플레이어의 게임 닉네임과 태그를 기반으로 Riot API를 통해 최신 티어 정보와 챔피언 숙련도 데이터를 가져옵니다. 한 번 수집된 데이터는 `db.yaml` 파일에 저장되어 재사용됩니다.

2. **능력치 계산**: 각 플레이어에 대해 다음 요소들을 종합하여 라인별 전력을 계산합니다.
   - 라인 선호도(L): 챔피언 숙련도를 기반으로 각 포지션에서의 선호도 점수
   - 실력 점수(A): 티어와 디비전을 기반으로 한 정규화된 실력 점수
   - 노이즈(ε): 약간의 랜덤성을 추가하여 다양한 조합을 탐색

3. **최적 배분**: 10명의 플레이어를 5명씩 두 팀으로 나누는 모든 가능한 조합을 검토합니다. 각 조합에 대해 헝가리안 알고리즘을 사용하여 최적의 포지션 배정을 수행하고, 두 팀의 총 전력 차이를 계산합니다.

4. **제약 조건 검증**: `include_group`과 `expel_group`에 정의된 제약 조건을 만족하는 조합만을 후보로 고려합니다.

5. **결과 출력**: 전력 차이가 가장 작은 조합을 선택하여 각 팀의 구성원, 포지션, 티어, 선호도, 전력 점수를 표 형식으로 출력합니다.

## 실행 방법

프로그램을 실행하려면 Python 환경에서 다음 명령을 사용합니다:

```bash
python main.py
```

실행 전에 `env/key.yaml` 파일에 유효한 Riot API 키가 설정되어 있어야 하며, `env/input_players.yaml` 파일에 10명의 플레이어 정보가 입력되어 있어야 합니다.

